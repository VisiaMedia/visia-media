"use strict";(self.webpackChunkvisia=self.webpackChunkvisia||[]).push([[670],{868:(t,e,s)=>{s.d(e,{A:()=>c});var i=s(2811),o=(s(5828),s(6112));function n(){return n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},n.apply(this,arguments)}function r(t,e){return Object.keys(e).reduce(((t,s)=>t.replace(`{${s}}`,e[s]||"")),t||"")}class a{constructor(){var t;this.id="swup-announcer",this.style="position:absolute;top:0;left:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;word-wrap:normal;width:1px;height:1px;",this.region=void 0,this.region=null!=(t=this.getRegion())?t:this.createRegion()}getRegion(){return document.getElementById(this.id)}createRegion(){const t=function(t){const e=document.createElement("template");return e.innerHTML=t,e.content.children[0]}(`<p aria-live="assertive" aria-atomic="true" id="${this.id}" style="${this.style}"></p>`);return document.body.appendChild(t),t}announce(t,e=0){return new Promise((s=>{setTimeout((()=>{this.region.textContent===t&&(t=`${t}.`),this.region.textContent="",this.region.textContent=t,s()}),e)}))}}function l(t){let e;if(e="string"==typeof t?document.querySelector(t):t,!(e instanceof HTMLElement))return;const s=e.getAttribute("tabindex");e.setAttribute("tabindex","-1"),e.focus({preventScroll:!0}),null!==s&&e.setAttribute("tabindex",s)}class c extends i.A{constructor(t={}){super(),this.name="SwupA11yPlugin",this.requires={swup:">=4"},this.defaults={headingSelector:"h1",respectReducedMotion:!0,autofocus:!1,announcements:{visit:"Navigated to: {title}",url:"New page at {url}"}},this.options=void 0,this.announcer=void 0,this.announcementDelay=100,this.rootSelector="body",this.handleAnchorScroll=(t,{hash:e})=>{const s=this.swup.getAnchorElement(e);s instanceof HTMLElement&&l(s)},this.options=n({},this.defaults,t),this.announcer=new a}mount(){this.swup.hooks.create("content:announce"),this.swup.hooks.create("content:focus"),this.before("visit:start",this.prepareVisit),this.on("visit:start",this.markAsBusy),this.on("visit:end",this.unmarkAsBusy),this.on("visit:end",this.focusContent),this.on("visit:end",this.announceContent),this.on("scroll:anchor",this.handleAnchorScroll),this.before("visit:start",this.disableAnimations),this.before("link:self",this.disableAnimations),this.before("link:anchor",this.disableAnimations),this.swup.announce=this.announce.bind(this)}unmount(){this.swup.announce=void 0}async announce(t){await this.announcer.announce(t)}markAsBusy(){document.documentElement.setAttribute("aria-busy","true")}unmarkAsBusy(){document.documentElement.removeAttribute("aria-busy")}prepareVisit(t){t.a11y={announce:void 0,focus:this.rootSelector}}announceContent(t){this.swup.hooks.callSync("content:announce",t,void 0,(t=>{void 0===t.a11y.announce&&(t.a11y.announce=this.getPageAnnouncement()),t.a11y.announce&&this.announcer.announce(t.a11y.announce,this.announcementDelay)}))}focusContent(t){this.swup.hooks.callSync("content:focus",t,void 0,(t=>{t.a11y.focus&&(this.options.autofocus&&!0===function(){const t=function(){const t=document.querySelector("body [autofocus]");if(t&&!t.closest('[inert], [aria-disabled], [aria-hidden="true"]'))return t}();return!!t&&(t!==document.activeElement&&t.focus(),!0)}()||l(t.a11y.focus))}))}getPageAnnouncement(){const{headingSelector:t,announcements:e}=this.options;return function({headingSelector:t="h1",announcements:e={}}){var s,i;const n=document.documentElement.lang||"*",{href:a,url:l,pathname:c}=o.aZ.fromUrl(window.location.href),h=null!=(s=null!=(i=e[n])?i:e["*"])?s:e;if("object"!=typeof h)return;const u=document.querySelector(t);u||console.warn(`SwupA11yPlugin: No main heading (${t}) found on new page`);const d=(null==u?void 0:u.getAttribute("aria-label"))||(null==u?void 0:u.textContent)||document.title||r(h.url,{href:a,url:l,path:c});return r(h.visit,{title:d,href:a,url:l,path:c})}({headingSelector:t,announcements:e})}disableAnimations(t){this.options.respectReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(t.animation.animate=!1,t.scroll.animate=!1)}}},4515:(t,e,s)=>{s.d(e,{A:()=>n});var i=s(2811);function o(){return o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},o.apply(this,arguments)}class n extends i.A{constructor(t={}){super(),this.name="SwupBodyClassPlugin",this.requires={swup:">=4.6"},this.defaults={prefix:""},this.options=void 0,this.updateBodyClass=t=>{this.updateClassNames(document.body,t.to.document.body)},this.options=o({},this.defaults,t)}mount(){this.on("content:replace",this.updateBodyClass)}updateClassNames(t,e){const s=[...t.classList].filter((t=>this.isValidClassName(t))),i=[...e.classList].filter((t=>this.isValidClassName(t)));t.classList.remove(...s),t.classList.add(...i)}isValidClassName(t){return t&&t.startsWith(this.options.prefix)}}},1533:(t,e,s)=>{s.d(e,{A:()=>l});var i=s(2811),o=s(6112);function n(){return n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},n.apply(this,arguments)}function r(t,e,{stripEmptyParams:s=!1}={}){const i=a("method",t,e),n=a("enctype",t,e),r="multipart/form-data"===n,l=a("target",t,e,""),{origin:c,href:h}=o.aZ.fromUrl(a("action",t,e)),u=new FormData(t,e);let d,p;if("POST"===i&&(d=r?u:new URLSearchParams(u)),"GET"===i){const t=s?function(t){const e=new FormData;for(const[s,i]of Array.from(t.entries()))""!==i&&e.append(s,i);return e}(u):u;p=function(t,e){const[s,i]=[...t.split(/(?=#)/),""],o=s.split("?")[0],n=new URLSearchParams(e).toString();return n?`${o}?${n}${i}`:o+i}(h,t)}else p=h;const{url:m,hash:f}=o.aZ.fromUrl(p);return{origin:c,action:h,href:p,url:m,hash:f,method:i,target:l,data:u,body:d,encoding:n}}function a(t,e,s,i){var n,r;return function(t,e){switch(t){case"action":return null!=e?e:(0,o.bp)();case"method":return(e||"get").toUpperCase();case"enctype":return(e||"application/x-www-form-urlencoded").toLowerCase();default:return null!=e?e:null}}(t,null!=(n=null!=(r=null==s?void 0:s.getAttribute(`form${t}`))?r:e.getAttribute(t))?n:i)}class l extends i.A{constructor(t={}){super(),this.name="SwupFormsPlugin",this.requires={swup:">=4"},this.defaults={formSelector:"form[data-swup-form]",inlineFormSelector:"form[data-swup-inline-form]",stripEmptyParams:!1},this.options=void 0,this.specialKeys=void 0,this.formSubmitDelegate=void 0,this.prepareInlineForms=t=>{const{el:e}=t.trigger;if(null==e||!e.matches(this.options.inlineFormSelector))return;if(!e.id)return void console.error("[@swup/forms-plugin] inline forms must have an id attribute:",e);const s=`#${e.id}`;t.containers=[s],t.animation.scope="containers",t.animation.selector=s,t.scroll.target=s;const i=t.a11y;"object"==typeof i&&(i.focus=s)},this.options=n({},this.defaults,t),this.specialKeys=function(t){let e={};function s(){e={}}function i({key:s}){t.includes(s)&&(e[s]=!0)}function o({key:s}){t.includes(s)&&(e[s]=!1)}function n(){s()}return{watch:function(){document.addEventListener("keydown",i),document.addEventListener("keyup",o),window.addEventListener("blur",n)},unwatch:function(){document.removeEventListener("keydown",i),document.removeEventListener("keyup",o),document.removeEventListener("blur",n),s()},get pressed(){return Object.values(e).filter(Boolean).length>0}}}(["Meta","Control","Shift"]),this.beforeFormSubmit=this.beforeFormSubmit.bind(this)}mount(){this.swup.hooks.create("form:submit"),this.swup.hooks.create("form:submit:newtab"),this.specialKeys.watch(),this.formSubmitDelegate=this.swup.delegateEvent(this.options.formSelector,"submit",this.beforeFormSubmit,{capture:!0}),this.on("visit:start",this.prepareInlineForms,{priority:1})}unmount(){var t;null==(t=this.formSubmitDelegate)||t.destroy(),this.specialKeys.unwatch()}beforeFormSubmit(t){const e=this.swup,{delegateTarget:s,submitter:i}=t,{href:o,url:n,hash:a,target:l}=r(s,i),c=this.specialKeys.pressed,h="_blank"===l,u=c||h,d=e.createVisit({to:n,hash:a,el:s,event:t});if(u||!e.shouldIgnoreVisit(o,{el:s,event:t}))if(h)e.hooks.callSync("form:submit:newtab",d,{el:s,event:t});else if(c){e.hooks.callSync("form:submit:newtab",d,{el:s,event:t});const i=function(t){const e=t.getAttribute("target")||"";return t.setAttribute("target","_blank"),()=>{e?t.setAttribute("target",e):t.removeAttribute("target")}}(s);s.addEventListener("submit",(()=>setTimeout(i)),{once:!0})}else e.hooks.callSync("form:submit",d,{el:s,event:t},(()=>{this.submitForm(t)}))}submitForm(t){const{delegateTarget:e,submitter:s}=t,{stripEmptyParams:i}=this.options,{href:o,method:n,body:a}=r(e,s,{stripEmptyParams:i});["GET","POST"].includes(n)?(t.preventDefault(),this.swup.navigate(o,{method:n,body:a,cache:{read:!1,write:!0}},{el:e,event:t})):console.warn(`Unsupported form method: ${n}`)}}},1516:(t,e,s)=>{function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},i.apply(this,arguments)}s.d(e,{A:()=>r});const o=t=>String(t).split(".").map((t=>String(parseInt(t||"0",10)))).concat(["0","0"]).slice(0,3).join(".");class n{constructor(){this.isSwupPlugin=!0,this.swup=void 0,this.version=void 0,this.requires={},this.handlersToUnregister=[]}mount(){}unmount(){this.handlersToUnregister.forEach((t=>t())),this.handlersToUnregister=[]}_beforeMount(){if(!this.name)throw new Error("You must define a name of plugin when creating a class.")}_afterUnmount(){}_checkRequirements(){return"object"!=typeof this.requires||Object.entries(this.requires).forEach((([t,e])=>{if(!function(t,e,s){const i=function(t,e){var s;if("swup"===t)return null!=(s=e.version)?s:"";{var i;const s=e.findPlugin(t);return null!=(i=null==s?void 0:s.version)?i:""}}(t,s);return!!i&&((t,e)=>e.every((e=>{const[,s,i]=e.match(/^([\D]+)?(.*)$/)||[];var n,r;return((t,e)=>{const s={"":t=>0===t,">":t=>t>0,">=":t=>t>=0,"<":t=>t<0,"<=":t=>t<=0};return(s[e]||s[""])(t)})((r=i,n=o(n=t),r=o(r),n.localeCompare(r,void 0,{numeric:!0})),s||">=")})))(i,e)}(t,e=Array.isArray(e)?e:[e],this.swup)){const s=`${t} ${e.join(", ")}`;throw new Error(`Plugin version mismatch: ${this.name} requires ${s}`)}})),!0}on(t,e,s={}){var i;e=!(i=e).name.startsWith("bound ")||i.hasOwnProperty("prototype")?e.bind(this):e;const o=this.swup.hooks.on(t,e,s);return this.handlersToUnregister.push(o),o}once(t,e,s={}){return this.on(t,e,i({},s,{once:!0}))}before(t,e,s={}){return this.on(t,e,i({},s,{before:!0}))}replace(t,e,s={}){return this.on(t,e,i({},s,{replace:!0}))}off(t,e){return this.swup.hooks.off(t,e)}}class r extends n{constructor(...t){super(...t),this.name="SwupGtmPlugin"}mount(){this.on("page:view",this.trackPageview)}trackPageview(){if("object"!=typeof window.dataLayer)return void console.warn("GTM is not loaded on the page");const t=window.location.pathname+window.location.search,e=document.title;window.dataLayer.push({event:"VirtualPageview",virtualPageURL:t,virtualPageTitle:e}),this.swup.log(`GTM page view: ${t}`)}}},7178:(t,e,s)=>{s.d(e,{A:()=>l});var i=s(2811);function o(){return o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},o.apply(this,arguments)}function n(t){return"title"!==t.localName&&!t.matches("[data-swup-theme]")}function r(t,e){return t.outerHTML===e.outerHTML}function a(t){return t.matches("link[rel=stylesheet][href]")}class l extends i.A{constructor(t={}){var e;super(),e=this,this.name="SwupHeadPlugin",this.requires={swup:">=4.6"},this.defaults={persistTags:!1,persistAssets:!1,awaitAssets:!1,timeout:3e3},this.options=void 0,this.updateHead=async function(t,{page:{}}){const s=t.to.document,{removed:i,added:o}=function(t,e,{shouldPersist:s=(()=>!1)}={}){const i=Array.from(t.children),o=Array.from(e.children),a=(l=i,o.reduce(((t,e,s)=>(l.some((t=>r(e,t)))||t.push({el:e,index:s}),t)),[]));var l;const c=function(t,e){return t.reduce(((t,s)=>(e.some((t=>r(s,t)))||t.push({el:s}),t)),[])}(i,o);return c.reverse().filter((({el:t})=>n(t))).filter((({el:t})=>!s(t))).forEach((({el:e})=>t.removeChild(e))),a.filter((({el:t})=>n(t))).forEach((({el:e,index:s=0})=>{t.insertBefore(e.cloneNode(!0),t.children[s+1]||null)})),{removed:c.map((({el:t})=>t)),added:a.map((({el:t})=>t))}}(document.head,s.head,{shouldPersist:t=>e.isPersistentTag(t)});e.swup.log(`Removed ${i.length} / added ${o.length} tags in head`);const l=(c=document.documentElement).lang!==(h=s.documentElement).lang?(c.lang=h.lang,c.lang||null):null;var c,h;if(l&&e.swup.log(`Updated lang attribute: ${l}`),e.options.awaitAssets){const t=function(t,e=0){return t.filter(a).map((t=>function(t,e=0){const s=e=>{t.sheet?e():setTimeout((()=>s(e)),10)};return new Promise((i=>{s((()=>i(t))),e>0&&setTimeout((()=>i(t)),e)}))}(t,e)))}(o,e.options.timeout);t.length&&(e.swup.log(`Waiting for ${t.length} assets to load`),await Promise.all(t))}},this.options=o({},this.defaults,t),this.options.persistAssets&&!this.options.persistTags&&(this.options.persistTags="link[rel=stylesheet], script[src], style")}mount(){this.before("content:replace",this.updateHead)}isPersistentTag(t){const{persistTags:e}=this.options;return"function"==typeof e?e(t):"string"==typeof e&&e.length>0?t.matches(e):Boolean(e)}}},7093:(t,e,s)=>{s.d(e,{A:()=>a});var i=s(2811),o=s(6112);function n(){return n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},n.apply(this,arguments)}const r={from:"(.*)",to:"(.*)",out:t=>t(),in:t=>t()};class a extends i.A{constructor(t){var e,s;super(),e=this,this.name="SwupJsPlugin",this.requires={swup:">=4"},this.defaults={animations:[],matchOptions:{}},this.options=void 0,this.animations=[],this.awaitOutAnimation=async function(t,{skip:s}){s||await e.findAndRunAnimation(t,"out")},this.awaitInAnimation=async function(t,{skip:s}){s||await e.findAndRunAnimation(t,"in")},Array.isArray(t)&&(t={animations:t}),this.options=n({},this.defaults,t),this.options.animations.push(r),this.animations=(s=this.options.matchOptions,this.options.animations.map((t=>function(t,e){return n({},t,{matchesFrom:(0,o.B6)(t.from,e),matchesTo:(0,o.B6)(t.to,e)})}(t,s))))}mount(){this.replace("animation:out:await",this.awaitOutAnimation,{priority:-1}),this.replace("animation:in:await",this.awaitInAnimation,{priority:-1})}async findAndRunAnimation(t,e){const s=function(t,e){return function(t,e,s,i){let o=0;const n=t.reduceRight(((t,n)=>{const r=function(t,e,s,i){let o=0;const n=t.matchesFrom(e);return n&&(o+=1),t.matchesTo(s)&&(o+=1),n&&t.to===i&&(o+=2),o}(n,e,s,i);return r>=o?(o=r,n):t}),null);return n}(t,e.from.url,e.to.url,e.animation.name)}(this.animations,t);if(s){const i=function(t,e,s){const i=t.matchesFrom(e.from.url),o=t.matchesTo(e.to.url);return{visit:e,direction:s,from:{url:e.from.url,pattern:t.from,params:i?i.params:{}},to:{url:e.to.url,pattern:t.to,params:o?o.params:{}}}}(s,t,e);await function(t,e){const{direction:s}=e,i=t[s];return i?new Promise((t=>{const s=i((()=>t()),e);(0,o.yL)(s)&&s.then(t)})):(console.warn(`Missing animation function for '${s}' phase`),Promise.resolve())}(s,i)}}}},2811:(t,e,s)=>{function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},i.apply(this,arguments)}s.d(e,{A:()=>n});const o=t=>String(t).split(".").map((t=>String(parseInt(t||"0",10)))).concat(["0","0"]).slice(0,3).join(".");class n{constructor(){this.isSwupPlugin=!0,this.swup=void 0,this.version=void 0,this.requires={},this.handlersToUnregister=[]}mount(){}unmount(){this.handlersToUnregister.forEach((t=>t())),this.handlersToUnregister=[]}_beforeMount(){if(!this.name)throw new Error("You must define a name of plugin when creating a class.")}_afterUnmount(){}_checkRequirements(){return"object"!=typeof this.requires||Object.entries(this.requires).forEach((([t,e])=>{if(!function(t,e,s){const i=function(t,e){var s;if("swup"===t)return null!=(s=e.version)?s:"";{var i;const s=e.findPlugin(t);return null!=(i=null==s?void 0:s.version)?i:""}}(t,s);return!!i&&((t,e)=>e.every((e=>{const[,s,i]=e.match(/^([\D]+)?(.*)$/)||[];var n,r;return((t,e)=>{const s={"":t=>0===t,">":t=>t>0,">=":t=>t>=0,"<":t=>t<0,"<=":t=>t<=0};return(s[e]||s[""])(t)})((r=i,n=o(n=t),r=o(r),n.localeCompare(r,void 0,{numeric:!0})),s||">=")})))(i,e)}(t,e=Array.isArray(e)?e:[e],this.swup)){const s=`${t} ${e.join(", ")}`;throw new Error(`Plugin version mismatch: ${this.name} requires ${s}`)}})),!0}on(t,e,s={}){var i;e=!(i=e).name.startsWith("bound ")||i.hasOwnProperty("prototype")?e.bind(this):e;const o=this.swup.hooks.on(t,e,s);return this.handlersToUnregister.push(o),o}once(t,e,s={}){return this.on(t,e,i({},s,{once:!0}))}before(t,e,s={}){return this.on(t,e,i({},s,{before:!0}))}replace(t,e,s={}){return this.on(t,e,i({},s,{replace:!0}))}off(t,e){return this.swup.hooks.off(t,e)}}},8091:(t,e,s)=>{s.d(e,{A:()=>h});var i=s(2811),o=s(6112);function n(){return n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},n.apply(this,arguments)}function r(){return window.matchMedia("(hover: hover)").matches}function a(t){return!!t&&(t instanceof HTMLAnchorElement||t instanceof SVGAElement)}const l=window.requestIdleCallback||(t=>setTimeout(t,1)),c=["preloadVisibleLinks"];class h extends i.A{constructor(t={}){var e;super(),e=this,this.name="SwupPreloadPlugin",this.requires={swup:">=4.5"},this.defaults={throttle:5,preloadInitialPage:!0,preloadHoveredLinks:!0,preloadVisibleLinks:{enabled:!1,threshold:.2,delay:500,containers:["body"],ignore:()=>!1}},this.options=void 0,this.queue=void 0,this.preloadObserver=void 0,this.preloadPromises=new Map,this.mouseEnterDelegate=void 0,this.touchStartDelegate=void 0,this.focusDelegate=void 0,this.onPageLoad=(t,e,s)=>{const{url:i}=t.to;return i&&this.preloadPromises.has(i)?this.preloadPromises.get(i):s(t,e)},this.onMouseEnter=async function(t){if(t.target!==t.delegateTarget)return;if(!r())return;const s=t.delegateTarget;if(!a(s))return;const{url:i,hash:n}=o.aZ.fromElement(s),l=e.swup.createVisit({to:i,hash:n,el:s,event:t});e.swup.hooks.callSync("link:hover",l,{el:s,event:t}),e.preload(s,{priority:!0})},this.onTouchStart=t=>{if(r())return;const e=t.delegateTarget;a(e)&&this.preload(e,{priority:!0})},this.onFocus=t=>{const e=t.delegateTarget;a(e)&&this.preload(e,{priority:!0})};const{preloadVisibleLinks:s}=t,i=function(t,e){if(null==t)return{};var s,i,o={},n=Object.keys(t);for(i=0;i<n.length;i++)e.indexOf(s=n[i])>=0||(o[s]=t[s]);return o}(t,c);this.options=n({},this.defaults,i),"object"==typeof s?this.options.preloadVisibleLinks=n({},this.options.preloadVisibleLinks,{enabled:!0},s):this.options.preloadVisibleLinks.enabled=Boolean(s),this.preload=this.preload.bind(this),this.queue=function(t=1){const e=[],s=[];let i=0,o=0;function n(){o<t&&i>0&&((s.shift()||e.shift()||(()=>{}))(),i--,o++)}return{add:function(t,o=!1){if(t.__queued){if(!o)return;{const s=e.indexOf(t);if(s>=0){const t=e.splice(s,1);i-=t.length}}}t.__queued=!0,(o?s:e).push(t),i++,i<=1&&n()},next:function(){o--,n()}}}(this.options.throttle)}mount(){const t=this.swup;t.options.cache?(t.hooks.create("page:preload"),t.hooks.create("link:hover"),t.preload=this.preload,t.preloadLinks=this.preloadLinks,this.replace("page:load",this.onPageLoad),this.preloadLinks(),this.on("page:view",(()=>this.preloadLinks())),this.options.preloadVisibleLinks.enabled&&(this.preloadVisibleLinks(),this.on("page:view",(()=>this.preloadVisibleLinks()))),this.options.preloadHoveredLinks&&this.preloadLinksOnAttention(),this.options.preloadInitialPage&&this.preload((0,o.bp)())):console.warn("SwupPreloadPlugin: swup cache needs to be enabled for preloading")}unmount(){var t,e,s;this.swup.preload=void 0,this.swup.preloadLinks=void 0,this.preloadPromises.clear(),null==(t=this.mouseEnterDelegate)||t.destroy(),null==(e=this.touchStartDelegate)||e.destroy(),null==(s=this.focusDelegate)||s.destroy(),this.stopPreloadingVisibleLinks()}async preload(t,e={}){var s;let i,n;const r=null!=(s=e.priority)&&s;if(Array.isArray(t))return Promise.all(t.map((t=>this.preload(t))));if(a(t))n=t,({href:i}=o.aZ.fromElement(t));else{if("string"!=typeof t)return;i=t}if(!i)return;if(this.preloadPromises.has(i))return this.preloadPromises.get(i);if(!this.shouldPreload(i,{el:n}))return;const l=new Promise((t=>{this.queue.add((()=>{this.performPreload(i).catch((()=>{})).then((e=>t(e))).finally((()=>{this.queue.next(),this.preloadPromises.delete(i)}))}),r)}));return this.preloadPromises.set(i,l),l}preloadLinks(){l((()=>{Array.from(document.querySelectorAll("a[data-swup-preload], [data-swup-preload-all] a")).forEach((t=>this.preload(t)))}))}preloadLinksOnAttention(){const{swup:t}=this,{linkSelector:e}=t.options,s={passive:!0,capture:!0};this.mouseEnterDelegate=t.delegateEvent(e,"mouseenter",this.onMouseEnter,s),this.touchStartDelegate=t.delegateEvent(e,"touchstart",this.onTouchStart,s),this.focusDelegate=t.delegateEvent(e,"focus",this.onFocus,s)}preloadVisibleLinks(){if(this.preloadObserver)return void this.preloadObserver.update();const{threshold:t,delay:e,containers:s}=this.options.preloadVisibleLinks;this.preloadObserver=function({threshold:t,delay:e,containers:s,callback:i,filter:n}){const r=new Map,a=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting?c(t.target):h(t.target)}))}),{threshold:t}),c=t=>{var s;const{href:n}=o.aZ.fromElement(t),l=null!=(s=r.get(n))?s:new Set;r.set(n,l),l.add(t),setTimeout((()=>{const e=r.get(n);null!=e&&e.size&&(i(t),a.unobserve(t),e.delete(t))}),e)},h=t=>{var e;const{href:s}=o.aZ.fromElement(t);null==(e=r.get(s))||e.delete(t)},u=()=>{l((()=>{const t=s.map((t=>`${t} a[*|href]`)).join(", ");Array.from(document.querySelectorAll(t)).filter((t=>n(t))).forEach((t=>a.observe(t)))}))};return{start:()=>u(),stop:()=>a.disconnect(),update:()=>(r.clear(),u())}}({threshold:t,delay:e,containers:s,callback:t=>this.preload(t),filter:t=>{if(this.options.preloadVisibleLinks.ignore(t))return!1;if(!t.matches(this.swup.options.linkSelector))return!1;const{href:e}=o.aZ.fromElement(t);return this.shouldPreload(e,{el:t})}}),this.preloadObserver.start()}stopPreloadingVisibleLinks(){this.preloadObserver&&this.preloadObserver.stop()}shouldPreload(t,{el:e}={}){const{url:s,href:i}=o.aZ.fromUrl(t);return!(!function(){if(navigator.connection){var t;if(navigator.connection.saveData)return!1;if(null!=(t=navigator.connection.effectiveType)&&t.endsWith("2g"))return!1}return!0}()||this.swup.cache.has(s)||this.preloadPromises.has(s)||this.swup.shouldIgnoreVisit(i,{el:e})||e&&this.swup.resolveUrl(s)===this.swup.resolveUrl((0,o.bp)()))}async performPreload(t){var e=this;const{url:s}=o.aZ.fromUrl(t),i=this.swup.createVisit({to:s}),n=await this.swup.hooks.call("page:preload",i,{url:s},(async function(s,i){return i.page=await e.swup.fetchPage(t,{visit:s}),i.page}));return n}}},3367:(t,e,s)=>{s.d(e,{A:()=>a});var i=s(2811),o=s(6112),n=s(84);function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},r.apply(this,arguments)}class a extends i.A{constructor(t={}){super(),this.name="SwupScrollPlugin",this.requires={swup:">=4.2.0"},this.scrl=void 0,this.defaults={doScrollingRightAway:!1,animateScroll:{betweenPages:!0,samePageWithHash:!0,samePage:!0},scrollFriction:.3,scrollAcceleration:.04,getAnchorElement:void 0,offset:0,scrollContainers:"[data-swup-scroll-container]",shouldResetScrollPosition:()=>!0,markScrollTarget:!1},this.options=void 0,this.cachedScrollPositions={},this.previousScrollRestoration=void 0,this.currentCacheKey=void 0,this.getAnchorElement=(t="")=>"function"==typeof this.options.getAnchorElement?this.options.getAnchorElement(t):this.swup.getAnchorElement(t),this.getOffset=t=>t?"function"==typeof this.options.offset?parseInt(String(this.options.offset(t)),10):parseInt(String(this.options.offset),10):0,this.onBeforeLinkToSelf=t=>{t.scroll.animate=this.shouldAnimate("samePage")},this.handleScrollToTop=t=>{var e,s;return null==(e=(s=this.swup).scrollTo)||e.call(s,0,t.scroll.animate),!0},this.onBeforeLinkToAnchor=t=>{t.scroll.animate=this.shouldAnimate("samePageWithHash")},this.handleScrollToAnchor=(t,{hash:e})=>this.maybeScrollToAnchor(e,t.scroll.animate),this.onBeforeVisitStart=t=>{t.scroll.scrolledToContent=!1,t.scroll.animate=this.shouldAnimate("betweenPages")},this.onVisitStart=t=>{var e;this.cacheScrollPositions(t.from.url),this.maybeResetScrollPositions(t);const s=null!=(e=t.scroll.target)?e:t.to.hash;t.scroll.animate&&this.options.doScrollingRightAway&&!s&&this.doScrollingBetweenPages(t)},this.handleScrollToContent=t=>{t.scroll.scrolledToContent||this.doScrollingBetweenPages(t),this.restoreScrollContainers(t.to.url)},this.doScrollingBetweenPages=t=>{var e,s;if(t.history.popstate&&!t.animation.animate)return;const i=null!=(e=t.scroll.target)?e:t.to.hash;if(i&&this.maybeScrollToAnchor(i,t.scroll.animate))return;if(!t.scroll.reset)return;const o=this.getCachedScrollPositions(t.to.url),n=(null==o||null==(s=o.window)?void 0:s.top)||0;requestAnimationFrame((()=>{var e,s;return null==(e=(s=this.swup).scrollTo)?void 0:e.call(s,n,t.scroll.animate)})),t.scroll.scrolledToContent=!0},this.maybeResetScrollPositions=t=>{const{popstate:e}=t.history,{url:s}=t.to,{el:i}=t.trigger;e||i&&!this.options.shouldResetScrollPosition(i)||this.resetScrollPositions(s)},this.options=r({},this.defaults,t)}mount(){const t=this.swup;t.hooks.create("scroll:start"),t.hooks.create("scroll:end");const e=this.swup.createVisit({to:this.swup.currentPageUrl});this.scrl=new n.A({onStart:()=>t.hooks.callSync("scroll:start",e,void 0),onEnd:()=>t.hooks.callSync("scroll:end",e,void 0),onCancel:()=>t.hooks.callSync("scroll:end",e,void 0),friction:this.options.scrollFriction,acceleration:this.options.scrollAcceleration}),t.scrollTo=(s,i=!0)=>{i?this.scrl.scrollTo(s):(t.hooks.callSync("scroll:start",e,void 0),window.scrollTo(0,s),t.hooks.callSync("scroll:end",e,void 0))},this.previousScrollRestoration=window.history.scrollRestoration,t.options.animateHistoryBrowsing&&(window.history.scrollRestoration="manual"),this.updateScrollTarget=this.updateScrollTarget.bind(this),this.options.markScrollTarget&&(window.addEventListener("popstate",this.updateScrollTarget),window.addEventListener("hashchange",this.updateScrollTarget),this.on("page:view",this.updateScrollTarget),this.on("link:anchor",this.updateScrollTarget),this.on("link:self",this.updateScrollTarget),this.updateScrollTarget()),this.before("visit:start",this.onBeforeVisitStart,{priority:-1}),this.on("visit:start",this.onVisitStart,{priority:1}),this.replace("content:scroll",this.handleScrollToContent),this.before("link:self",this.onBeforeLinkToSelf,{priority:-1}),this.replace("scroll:top",this.handleScrollToTop),this.before("link:anchor",this.onBeforeLinkToAnchor,{priority:-1}),this.replace("scroll:anchor",this.handleScrollToAnchor)}unmount(){super.unmount(),this.previousScrollRestoration&&(window.history.scrollRestoration=this.previousScrollRestoration),window.removeEventListener("popstate",this.updateScrollTarget),window.removeEventListener("hashchange",this.updateScrollTarget),this.cachedScrollPositions={},delete this.swup.scrollTo,delete this.scrl}shouldAnimate(t){return"boolean"==typeof this.options.animateScroll?this.options.animateScroll:this.options.animateScroll[t]}maybeScrollToAnchor(t,e=!1){var s,i;if(!t)return!1;const o=this.getAnchorElement(t);if(!o)return console.warn(`Anchor target ${t} not found`),!1;if(!(o instanceof Element))return console.warn(`Anchor target ${t} is not a DOM node`),!1;const{top:n}=o.getBoundingClientRect(),r=n+window.scrollY-this.getOffset(o);return null==(s=(i=this.swup).scrollTo)||s.call(i,r,e),!0}cacheScrollPositions(t){const e=this.swup.resolveUrl(t),s=(0,o.YG)(this.options.scrollContainers).map((t=>({top:t.scrollTop,left:t.scrollLeft}))),i={window:{top:window.scrollY,left:window.scrollX},containers:s};this.cachedScrollPositions[e]=i}resetScrollPositions(t){const e=this.swup.resolveUrl(t);delete this.cachedScrollPositions[e]}getCachedScrollPositions(t){const e=this.swup.resolveUrl(t);return this.cachedScrollPositions[e]}restoreScrollContainers(t){const e=this.getCachedScrollPositions(t);e&&0!==e.containers.length&&(0,o.YG)(this.options.scrollContainers).forEach(((t,s)=>{const i=e.containers[s];null!=i&&(t.scrollTop=i.top,t.scrollLeft=i.left)}))}updateScrollTarget(){var t;const{hash:e}=window.location,s=document.querySelector("[data-swup-scroll-target]");let i=this.getAnchorElement(e);i instanceof HTMLBodyElement&&(i=null),s!==i&&(null==s||s.removeAttribute("data-swup-scroll-target"),null==(t=i)||t.setAttribute("data-swup-scroll-target",""))}}},6112:(t,e,s)=>{s.d(e,{Ay:()=>Z,B6:()=>d,YG:()=>w,aZ:()=>u,bp:()=>a,yL:()=>y});var i=s(2699),o=s(5867);function n(){return n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)({}).hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},n.apply(null,arguments)}const r=(t,e)=>String(t).toLowerCase().replace(/[\s/_.]+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+|-+$/g,"")||e||"",a=({hash:t}={})=>window.location.pathname+window.location.search+(t?window.location.hash:""),l=(t,e={})=>{const s=n({url:t=t||a({hash:!0}),random:Math.random(),source:"swup"},e);window.history.pushState(s,"",t)},c=(t=null,e={})=>{t=t||a({hash:!0});const s=n({},window.history.state||{},{url:t,random:Math.random(),source:"swup"},e);window.history.replaceState(s,"",t)},h=(t,e,s,o)=>{const r=new AbortController;return o=n({},o,{signal:r.signal}),(0,i.A)(t,e,s,o),{destroy:()=>r.abort()}};class u extends URL{constructor(t,e=document.baseURI){super(t.toString(),e),Object.setPrototypeOf(this,u.prototype)}get url(){return this.pathname+this.search}static fromElement(t){const e=t.getAttribute("href")||t.getAttribute("xlink:href")||"";return new u(e)}static fromUrl(t){return new u(t)}}const d=(t,e)=>{try{return(0,o.YW)(t,e)}catch(e){throw new Error(`[swup] Error parsing path "${String(t)}":\n${String(e)}`)}};class p extends Error{constructor(t,e){super(t),this.url=void 0,this.status=void 0,this.aborted=void 0,this.timedOut=void 0,this.name="FetchError",this.url=e.url,this.status=e.status,this.aborted=e.aborted||!1,this.timedOut=e.timedOut||!1}}async function m(t,e={}){var s;t=u.fromUrl(t).url;const{visit:i=this.visit}=e,o=n({},this.options.requestHeaders,e.headers),r=null!=(s=e.timeout)?s:this.options.timeout,a=new AbortController,{signal:l}=a;e=n({},e,{headers:o,signal:l});let c,h=!1,d=null;r&&r>0&&(d=setTimeout((()=>{h=!0,a.abort("timeout")}),r));try{c=await this.hooks.call("fetch:request",i,{url:t,options:e},((t,{url:e,options:s})=>fetch(e,s))),d&&clearTimeout(d)}catch(e){if(h)throw this.hooks.call("fetch:timeout",i,{url:t}),new p(`Request timed out: ${t}`,{url:t,timedOut:h});if("AbortError"===(null==e?void 0:e.name)||l.aborted)throw new p(`Request aborted: ${t}`,{url:t,aborted:!0});throw e}const{status:m,url:f}=c,g=await c.text();if(500===m)throw this.hooks.call("fetch:error",i,{status:m,response:c,url:f}),new p(`Server error: ${f}`,{status:m,url:f});if(!g)throw new p(`Empty response: ${f}`,{status:m,url:f});const{url:w}=u.fromUrl(f),v={url:w,html:g};return!i.cache.write||e.method&&"GET"!==e.method||t!==w||this.cache.set(v.url,v),v}class f{constructor(t){this.swup=void 0,this.pages=new Map,this.swup=t}get size(){return this.pages.size}get all(){const t=new Map;return this.pages.forEach(((e,s)=>{t.set(s,n({},e))})),t}has(t){return this.pages.has(this.resolve(t))}get(t){const e=this.pages.get(this.resolve(t));return e?n({},e):e}set(t,e){e=n({},e,{url:t=this.resolve(t)}),this.pages.set(t,e),this.swup.hooks.callSync("cache:set",void 0,{page:e})}update(t,e){t=this.resolve(t);const s=n({},this.get(t),e,{url:t});this.pages.set(t,s)}delete(t){this.pages.delete(this.resolve(t))}clear(){this.pages.clear(),this.swup.hooks.callSync("cache:clear",void 0,void 0)}prune(t){this.pages.forEach(((e,s)=>{t(s,e)&&this.delete(s)}))}resolve(t){const{url:e}=u.fromUrl(t);return this.swup.resolveUrl(e)}}const g=(t,e=document)=>e.querySelector(t),w=(t,e=document)=>Array.from(e.querySelectorAll(t)),v=()=>new Promise((t=>{requestAnimationFrame((()=>{requestAnimationFrame((()=>{t()}))}))}));function y(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then}function b(t,e=[]){return new Promise(((s,i)=>{const o=t(...e);y(o)?o.then(s,i):s(o)}))}function S(t,e){const s=null==t?void 0:t.closest(`[${e}]`);return null!=s&&s.hasAttribute(e)?(null==s?void 0:s.getAttribute(e))||!0:void 0}class k{constructor(t){this.swup=void 0,this.swupClasses=["to-","is-changing","is-rendering","is-popstate","is-animating","is-leaving"],this.swup=t}get selectors(){const{scope:t}=this.swup.visit.animation;return"containers"===t?this.swup.visit.containers:"html"===t?["html"]:Array.isArray(t)?t:[]}get selector(){return this.selectors.join(",")}get targets(){return this.selector.trim()?w(this.selector):[]}add(...t){this.targets.forEach((e=>e.classList.add(...t)))}remove(...t){this.targets.forEach((e=>e.classList.remove(...t)))}clear(){this.targets.forEach((t=>{const e=t.className.split(" ").filter((t=>this.isSwupClass(t)));t.classList.remove(...e)}))}isSwupClass(t){return this.swupClasses.some((e=>t.startsWith(e)))}}class A{constructor(t,e){this.id=void 0,this.state=void 0,this.from=void 0,this.to=void 0,this.containers=void 0,this.animation=void 0,this.trigger=void 0,this.cache=void 0,this.history=void 0,this.scroll=void 0,this.meta=void 0;const{to:s,from:i,hash:o,el:n,event:r}=e;this.id=Math.random(),this.state=1,this.from={url:null!=i?i:t.location.url,hash:t.location.hash},this.to={url:s,hash:o},this.containers=t.options.containers,this.animation={animate:!0,wait:!1,name:void 0,native:t.options.native,scope:t.options.animationScope,selector:t.options.animationSelector},this.trigger={el:n,event:r},this.cache={read:t.options.cache,write:t.options.cache},this.history={action:"push",popstate:!1,direction:void 0},this.scroll={reset:!0,target:void 0},this.meta={}}advance(t){this.state<t&&(this.state=t)}abort(){this.state=8}get done(){return this.state>=7}}function P(t){return new A(this,t)}class E{constructor(t){this.swup=void 0,this.registry=new Map,this.hooks=["animation:out:start","animation:out:await","animation:out:end","animation:in:start","animation:in:await","animation:in:end","animation:skip","cache:clear","cache:set","content:replace","content:scroll","enable","disable","fetch:request","fetch:error","fetch:timeout","history:popstate","link:click","link:self","link:anchor","link:newtab","page:load","page:view","scroll:top","scroll:anchor","visit:start","visit:transition","visit:abort","visit:end"],this.swup=t,this.init()}init(){this.hooks.forEach((t=>this.create(t)))}create(t){this.registry.has(t)||this.registry.set(t,new Map)}exists(t){return this.registry.has(t)}get(t){const e=this.registry.get(t);if(e)return e;console.error(`Unknown hook '${t}'`)}clear(){this.registry.forEach((t=>t.clear()))}on(t,e,s={}){const i=this.get(t);if(!i)return console.warn(`Hook '${t}' not found.`),()=>{};const o=n({},s,{id:i.size+1,hook:t,handler:e});return i.set(e,o),()=>this.off(t,e)}before(t,e,s={}){return this.on(t,e,n({},s,{before:!0}))}replace(t,e,s={}){return this.on(t,e,n({},s,{replace:!0}))}once(t,e,s={}){return this.on(t,e,n({},s,{once:!0}))}off(t,e){const s=this.get(t);s&&e?s.delete(e)||console.warn(`Handler for hook '${t}' not found.`):s&&s.clear()}async call(t,e,s,i){const[o,n,r]=this.parseCallArgs(t,e,s,i),{before:a,handler:l,after:c}=this.getHandlers(t,r);await this.run(a,o,n);const[h]=await this.run(l,o,n,!0);return await this.run(c,o,n),this.dispatchDomEvent(t,o,n),h}callSync(t,e,s,i){const[o,n,r]=this.parseCallArgs(t,e,s,i),{before:a,handler:l,after:c}=this.getHandlers(t,r);this.runSync(a,o,n);const[h]=this.runSync(l,o,n,!0);return this.runSync(c,o,n),this.dispatchDomEvent(t,o,n),h}parseCallArgs(t,e,s,i){return e instanceof A||"object"!=typeof e&&"function"!=typeof s?[e,s,i]:[void 0,e,s]}async run(t,e=this.swup.visit,s,i=!1){const o=[];for(const{hook:n,handler:r,defaultHandler:a,once:l}of t)if(null==e||!e.done){l&&this.off(n,r);try{const t=await b(r,[e,s,a]);o.push(t)}catch(t){if(i)throw t;console.error(`Error in hook '${n}':`,t)}}return o}runSync(t,e=this.swup.visit,s,i=!1){const o=[];for(const{hook:n,handler:r,defaultHandler:a,once:l}of t)if(null==e||!e.done){l&&this.off(n,r);try{const t=r(e,s,a);o.push(t),y(t)&&console.warn(`Swup will not await Promises in handler for synchronous hook '${n}'.`)}catch(t){if(i)throw t;console.error(`Error in hook '${n}':`,t)}}return o}getHandlers(t,e){const s=this.get(t);if(!s)return{found:!1,before:[],handler:[],after:[],replaced:!1};const i=Array.from(s.values()),o=this.sortRegistrations,n=i.filter((({before:t,replace:e})=>t&&!e)).sort(o),r=i.filter((({replace:t})=>t)).filter((t=>!0)).sort(o),a=i.filter((({before:t,replace:e})=>!t&&!e)).sort(o),l=r.length>0;let c=[];if(e&&(c=[{id:0,hook:t,handler:e}],l)){const s=r.length-1,{handler:i,once:o}=r[s],n=t=>{const s=r[t-1];return s?(e,i)=>s.handler(e,i,n(t-1)):e};c=[{id:0,hook:t,once:o,handler:i,defaultHandler:n(s)}]}return{found:!0,before:n,handler:c,after:a,replaced:l}}sortRegistrations(t,e){var s,i;return(null!=(s=t.priority)?s:0)-(null!=(i=e.priority)?i:0)||t.id-e.id||0}dispatchDomEvent(t,e,s){if(null!=e&&e.done)return;const i={hook:t,args:s,visit:e||this.swup.visit};document.dispatchEvent(new CustomEvent("swup:any",{detail:i,bubbles:!0})),document.dispatchEvent(new CustomEvent(`swup:${t}`,{detail:i,bubbles:!0}))}parseName(t){const[e,...s]=t.split(".");return[e,s.reduce(((t,e)=>n({},t,{[e]:!0})),{})]}}const T=t=>{if(t&&"#"===t.charAt(0)&&(t=t.substring(1)),!t)return null;const e=decodeURIComponent(t);let s=document.getElementById(t)||document.getElementById(e)||g(`a[name='${CSS.escape(t)}']`)||g(`a[name='${CSS.escape(e)}']`);return s||"top"!==t||(s=document.body),s},L="transition",O="animation";async function C({selector:t,elements:e}){if(!1===t&&!e)return;let s=[];if(e)s=Array.from(e);else if(t&&(s=w(t,document.body),!s.length))return void console.warn(`[swup] No elements found matching animationSelector \`${t}\``);const i=s.map((t=>function(t){const{type:e,timeout:s,propCount:i}=function(t){const e=window.getComputedStyle(t),s=U(e,`${L}Delay`),i=U(e,`${L}Duration`),o=$(s,i),n=U(e,`${O}Delay`),r=U(e,`${O}Duration`),a=$(n,r),l=Math.max(o,a),c=l>0?o>a?L:O:null;return{type:c,timeout:l,propCount:c?c===L?i.length:r.length:0}}(t);return!(!e||!s)&&new Promise((o=>{const n=`${e}end`,r=performance.now();let a=0;const l=()=>{t.removeEventListener(n,c),o()},c=e=>{e.target===t&&((performance.now()-r)/1e3<e.elapsedTime||++a>=i&&l())};setTimeout((()=>{a<i&&l()}),s+1),t.addEventListener(n,c)}))}(t)));i.filter(Boolean).length>0?await Promise.all(i):t&&console.warn(`[swup] No CSS animation duration defined on elements matching \`${t}\``)}function U(t,e){return(t[e]||"").split(", ")}function $(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map(((e,s)=>j(e)+j(t[s]))))}function j(t){return 1e3*parseFloat(t)}function x(t,e={},s={}){if("string"!=typeof t)throw new Error("swup.navigate() requires a URL parameter");if(this.shouldIgnoreVisit(t,{el:s.el,event:s.event}))return void window.location.assign(t);const{url:i,hash:o}=u.fromUrl(t),r=this.createVisit(n({},s,{to:i,hash:o}));this.performNavigation(r,e)}async function V(t,e={}){if(this.navigating){if(this.visit.state>=6)return t.state=2,void(this.onVisitEnd=()=>this.performNavigation(t,e));await this.hooks.call("visit:abort",this.visit,void 0),delete this.visit.to.document,this.visit.state=8}this.navigating=!0,this.visit=t;const{el:s}=t.trigger;e.referrer=e.referrer||this.location.url,!1===e.animate&&(t.animation.animate=!1),t.animation.animate||this.classes.clear();const i=e.history||S(s,"data-swup-history");"string"==typeof i&&["push","replace"].includes(i)&&(t.history.action=i);const o=e.animation||S(s,"data-swup-animation");var n,a;"string"==typeof o&&(t.animation.name=o),t.meta=e.meta||{},"object"==typeof e.cache?(t.cache.read=null!=(n=e.cache.read)?n:t.cache.read,t.cache.write=null!=(a=e.cache.write)?a:t.cache.write):void 0!==e.cache&&(t.cache={read:!!e.cache,write:!!e.cache}),delete e.cache;try{await this.hooks.call("visit:start",t,void 0),t.state=3;const s=this.hooks.call("page:load",t,{options:e},(async(t,e)=>{let s;return t.cache.read&&(s=this.cache.get(t.to.url)),e.page=s||await this.fetchPage(t.to.url,e.options),e.cache=!!s,e.page}));s.then((({html:e})=>{t.advance(5),t.to.html=e,t.to.document=(new DOMParser).parseFromString(e,"text/html")}));const i=t.to.url+t.to.hash;if(t.history.popstate||("replace"===t.history.action||t.to.url===this.location.url?c(i):(this.currentHistoryIndex++,l(i,{index:this.currentHistoryIndex}))),this.location=u.fromUrl(i),t.history.popstate&&this.classes.add("is-popstate"),t.animation.name&&this.classes.add(`to-${r(t.animation.name)}`),t.animation.wait&&await s,t.done)return;if(await this.hooks.call("visit:transition",t,void 0,(async()=>{if(!t.animation.animate)return await this.hooks.call("animation:skip",void 0),void await this.renderPage(t,await s);t.advance(4),await this.animatePageOut(t),t.animation.native&&document.startViewTransition?await document.startViewTransition((async()=>await this.renderPage(t,await s))).finished:await this.renderPage(t,await s),await this.animatePageIn(t)})),t.done)return;await this.hooks.call("visit:end",t,void 0,(()=>this.classes.clear())),t.state=7,this.navigating=!1,this.onVisitEnd&&(this.onVisitEnd(),this.onVisitEnd=void 0)}catch(e){if(!e||null!=e&&e.aborted)return void(t.state=8);t.state=9,console.error(e),this.options.skipPopStateHandling=()=>(window.location.assign(t.to.url+t.to.hash),!0),window.history.back()}finally{delete t.to.document}}const q=async function(t){await this.hooks.call("animation:out:start",t,void 0,(()=>{this.classes.add("is-changing","is-animating","is-leaving")})),await this.hooks.call("animation:out:await",t,{skip:!1},((t,{skip:e})=>{if(!e)return this.awaitAnimations({selector:t.animation.selector})})),await this.hooks.call("animation:out:end",t,void 0)},R=function(t){var e;const s=t.to.document;if(!s)return!1;const i=(null==(e=s.querySelector("title"))?void 0:e.innerText)||"";document.title=i;const o=w('[data-swup-persist]:not([data-swup-persist=""])'),n=t.containers.map((t=>{const e=document.querySelector(t),i=s.querySelector(t);return e&&i?(e.replaceWith(i.cloneNode(!0)),!0):(e||console.warn(`[swup] Container missing in current document: ${t}`),i||console.warn(`[swup] Container missing in incoming document: ${t}`),!1)})).filter(Boolean);return o.forEach((t=>{const e=t.getAttribute("data-swup-persist"),s=g(`[data-swup-persist="${e}"]`);s&&s!==t&&s.replaceWith(t)})),n.length===t.containers.length},H=function(t){const e={behavior:"auto"},{target:s,reset:i}=t.scroll,o=null!=s?s:t.to.hash;let r=!1;return o&&(r=this.hooks.callSync("scroll:anchor",t,{hash:o,options:e},((t,{hash:e,options:s})=>{const i=this.getAnchorElement(e);return i&&i.scrollIntoView(s),!!i}))),i&&!r&&(r=this.hooks.callSync("scroll:top",t,{options:e},((t,{options:e})=>(window.scrollTo(n({top:0,left:0},e)),!0)))),r},B=async function(t){if(t.done)return;const e=this.hooks.call("animation:in:await",t,{skip:!1},((t,{skip:e})=>{if(!e)return this.awaitAnimations({selector:t.animation.selector})}));await v(),await this.hooks.call("animation:in:start",t,void 0,(()=>{this.classes.remove("is-animating")})),await e,await this.hooks.call("animation:in:end",t,void 0)},D=async function(t,e){if(t.done)return;t.advance(6);const{url:s}=e;this.isSameResolvedUrl(a(),s)||(c(s),this.location=u.fromUrl(s),t.to.url=this.location.url,t.to.hash=this.location.hash),await this.hooks.call("content:replace",t,{page:e},((t,{})=>{if(this.classes.remove("is-leaving"),t.animation.animate&&this.classes.add("is-rendering"),!this.replaceContent(t))throw new Error("[swup] Container mismatch, aborting");t.animation.animate&&(this.classes.add("is-changing","is-animating","is-rendering"),t.animation.name&&this.classes.add(`to-${r(t.animation.name)}`))})),await this.hooks.call("content:scroll",t,void 0,(()=>this.scrollToContent(t))),await this.hooks.call("page:view",t,{url:this.location.url,title:document.title})},I=function(t){var e;if(e=t,Boolean(null==e?void 0:e.isSwupPlugin)){if(t.swup=this,!t._checkRequirements||t._checkRequirements())return t._beforeMount&&t._beforeMount(),t.mount(),this.plugins.push(t),this.plugins}else console.error("Not a swup plugin instance",t)};function M(t){const e=this.findPlugin(t);if(e)return e.unmount(),e._afterUnmount&&e._afterUnmount(),this.plugins=this.plugins.filter((t=>t!==e)),this.plugins;console.error("No such plugin",e)}function F(t){return this.plugins.find((e=>e===t||e.name===t||e.name===`Swup${String(t)}`))}function N(t){if("function"!=typeof this.options.resolveUrl)return console.warn("[swup] options.resolveUrl expects a callback function."),t;const e=this.options.resolveUrl(t);return e&&"string"==typeof e?e.startsWith("//")||e.startsWith("http")?(console.warn("[swup] options.resolveUrl needs to return a relative url"),t):e:(console.warn("[swup] options.resolveUrl needs to return a url"),t)}function _(t,e){return this.resolveUrl(t)===this.resolveUrl(e)}const W={animateHistoryBrowsing:!1,animationSelector:'[class*="transition-"]',animationScope:"html",cache:!0,containers:["#swup"],hooks:{},ignoreVisit:(t,{el:e}={})=>!(null==e||!e.closest("[data-no-swup]")),linkSelector:"a[href]",linkToSelf:"scroll",native:!1,plugins:[],resolveUrl:t=>t,requestHeaders:{"X-Requested-With":"swup",Accept:"text/html, application/xhtml+xml"},skipPopStateHandling:t=>{var e;return"swup"!==(null==(e=t.state)?void 0:e.source)},timeout:0};class Z{get currentPageUrl(){return this.location.url}constructor(t={}){var e,s;this.version="4.8.1",this.options=void 0,this.defaults=W,this.plugins=[],this.visit=void 0,this.cache=void 0,this.hooks=void 0,this.classes=void 0,this.location=u.fromUrl(window.location.href),this.currentHistoryIndex=void 0,this.clickDelegate=void 0,this.navigating=!1,this.onVisitEnd=void 0,this.use=I,this.unuse=M,this.findPlugin=F,this.log=()=>{},this.navigate=x,this.performNavigation=V,this.createVisit=P,this.delegateEvent=h,this.fetchPage=m,this.awaitAnimations=C,this.renderPage=D,this.replaceContent=R,this.animatePageIn=B,this.animatePageOut=q,this.scrollToContent=H,this.getAnchorElement=T,this.getCurrentUrl=a,this.resolveUrl=N,this.isSameResolvedUrl=_,this.options=n({},this.defaults,t),this.handleLinkClick=this.handleLinkClick.bind(this),this.handlePopState=this.handlePopState.bind(this),this.cache=new f(this),this.classes=new k(this),this.hooks=new E(this),this.visit=this.createVisit({to:""}),this.currentHistoryIndex=null!=(e=null==(s=window.history.state)?void 0:s.index)?e:1,this.enable()}async enable(){var t;const{linkSelector:e}=this.options;this.clickDelegate=this.delegateEvent(e,"click",this.handleLinkClick),window.addEventListener("popstate",this.handlePopState),this.options.animateHistoryBrowsing&&(window.history.scrollRestoration="manual"),this.options.native=this.options.native&&!!document.startViewTransition,this.options.plugins.forEach((t=>this.use(t)));for(const[t,e]of Object.entries(this.options.hooks)){const[s,i]=this.hooks.parseName(t);this.hooks.on(s,e,i)}"swup"!==(null==(t=window.history.state)?void 0:t.source)&&c(null,{index:this.currentHistoryIndex}),await v(),await this.hooks.call("enable",void 0,void 0,(()=>{const t=document.documentElement;t.classList.add("swup-enabled"),t.classList.toggle("swup-native",this.options.native)}))}async destroy(){this.clickDelegate.destroy(),window.removeEventListener("popstate",this.handlePopState),this.cache.clear(),this.options.plugins.forEach((t=>this.unuse(t))),await this.hooks.call("disable",void 0,void 0,(()=>{const t=document.documentElement;t.classList.remove("swup-enabled"),t.classList.remove("swup-native")})),this.hooks.clear()}shouldIgnoreVisit(t,{el:e,event:s}={}){const{origin:i,url:o,hash:n}=u.fromUrl(t);return i!==window.location.origin||!(!e||!this.triggerWillOpenNewWindow(e))||!!this.options.ignoreVisit(o+n,{el:e,event:s})}handleLinkClick(t){const e=t.delegateTarget,{href:s,url:i,hash:o}=u.fromElement(e);if(this.shouldIgnoreVisit(s,{el:e,event:t}))return;if(this.navigating&&i===this.visit.to.url)return void t.preventDefault();const n=this.createVisit({to:i,hash:o,el:e,event:t});t.metaKey||t.ctrlKey||t.shiftKey||t.altKey?this.hooks.callSync("link:newtab",n,{href:s}):0===t.button&&this.hooks.callSync("link:click",n,{el:e,event:t},(()=>{var e;const s=null!=(e=n.from.url)?e:"";t.preventDefault(),i&&i!==s?this.isSameResolvedUrl(i,s)||this.performNavigation(n):o?this.hooks.callSync("link:anchor",n,{hash:o},(()=>{c(i+o),this.scrollToContent(n)})):this.hooks.callSync("link:self",n,void 0,(()=>{"navigate"===this.options.linkToSelf?this.performNavigation(n):(c(i),this.scrollToContent(n))}))}))}handlePopState(t){var e,s,i,o;const n=null!=(e=null==(s=t.state)?void 0:s.url)?e:window.location.href;if(this.options.skipPopStateHandling(t))return;if(this.isSameResolvedUrl(a(),this.location.url))return;const{url:r,hash:l}=u.fromUrl(n),c=this.createVisit({to:r,hash:l,event:t});c.history.popstate=!0;const h=null!=(i=null==(o=t.state)?void 0:o.index)?i:0;h&&h!==this.currentHistoryIndex&&(c.history.direction=h-this.currentHistoryIndex>0?"forwards":"backwards",this.currentHistoryIndex=h),c.animation.animate=!1,c.scroll.reset=!1,c.scroll.target=!1,this.options.animateHistoryBrowsing&&(c.animation.animate=!0,c.scroll.reset=!0),this.hooks.callSync("history:popstate",c,{event:t},(()=>{this.performNavigation(c)}))}triggerWillOpenNewWindow(t){return!!t.matches('[download], [target="_blank"]')}}}}]);